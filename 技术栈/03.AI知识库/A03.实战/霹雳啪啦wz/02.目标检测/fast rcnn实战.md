
## 算法原理
![](figture/Pasted%20image%2020250119171544.png)

1. 将输入图像输入到特征提取网络（也就是backbone）中，进行图像特征提取，得到feature map；
2. 使用RPN结构（region proposal network），生成候选框（proposals）;
3. 将RPN生成的候选框，投影到特征图上，得到相应的特征矩阵，这些特征矩阵，通过Rol pooling缩放到统一的大小（7\*7），然后对其展平处理，最后通过一系列 全连接层 得到预测结果（类别和边界框）

总的来说，Faster R-CNN 是在Fast R-CNN基础上，将SS算法改成了RPN来生成候选框。
* SS算法生成候选框太慢，预计2s左右，而RPN生成候选框的耗时为0.1s左右，由于这里的优化提升，所以可以用于实时的目标检测。


### 疑问
#### 目标检测的任务是什么？
* 解决 这个是什么 和 在哪里的问题，即 图像中的检测目标是属于什么类别 以及 这个检测目标在图像中的位置

#### 类别 和 边界框分别如何得到？
* 类别概率：首先通过cnn提取特征之后，然后通过多分类softmax来获得
* 边界框回归参数：通过cnn提取特征之后，利用预测框 和 真实框的值，进行回归计算，得到一组回归参数。


#### anchor 和 候选框的区别？
* anchor不是候选框，anchor是利用RPN生成的边界框回归参数，将anchor调整到所需的候选框
* 候选框是anchor调整得到的


#### 1x1卷积 和 全连接层 是完全等效的？
* 如果全连接层 和 1x1卷积是等效的，那么在模型搭建的时候，是否可以将全连接层全部用1x1替换，提高模型在端侧部署的运行效率，卷积有NPU加速
































## 参考
《faster-rcnn》解读，训练，复现
https://www.bilibili.com/video/BV1Eg411G77J?spm_id_from=333.788.videopod.episodes&vd_source=3f7e86d544ccf5408190e0294ca8ec1a


